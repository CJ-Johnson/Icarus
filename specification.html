<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Icarus</title>

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

<!--bootsrap-->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<!--rainbow.js-->
<script src="rainbow/rainbow.min.js"></script>
<script src="rainbow/icarus.js"></script>
<link href="rainbow/codeschool.css" rel="stylesheet" type="text/css">

<style>
p, li { font-size: 13pt; }
p.lead { font-size: 20pt; margin-top: 1em; }
</style>
</head>

<body>
<br>
<div class="container">
  <div class="alert alert-info" role="alert">
    <p><strong>Heads up!</strong> Icarus is still very much a work in progress.
    Syntax and semantics may change without warning.</p>
  </div>

  <h2>Declaration and assignment</h2>

  <p class="lead">The basics</p>
  <div class="row">
    <div class="col-md-6">
      <p>Variables can be declared with the colon operator. All declarations,
      variables and functions alike, have a unified syntax of the identifer
      followed by a colon followed by the type. Arrows are used for functions
      and brackets are used for arrays.</p>

      <p>To assign a variable once it has been declared, use the assignment
      operator <code>=</code>. An assignment without a declaration is a
      compile-time error. However, if you would like to combine these two into a
      single line, this is perfectly okay</p>

      <p>Lastly, for many variables, specifying the type is redundant as it can
      be inferred from the value being assigned. In such instances, it is okay
      to simply omit the type specification, writing <code>:=</code>
      instead.</p> </div>
    <div class="col-md-6">
      <pre><code data-language="icarus">n : int          // n is an integer
f : int -&gt; bool	 // specifies that f that takes an int
                 // as an argument, and returns a bool
a : [3; int]       // a is an array of three integers

n = 17           // assign the value 17 to the n

// declare and define a string s to hold the value "hello"
s : string = "hello"

b := true        // Type inferred to be bool</code></pre>
    </div>
  </div>
  <p class="lead">Defining functions</p>
  <div class="row">
    <div class="col-md-6">
      <p>In the above examples, notice that we assigned values from
      <em>literals</em>. For example, 17 is an integer-literal, "hello" is a
      string-literal, and <code>true</code> is a boolean-literal. There is no
      special distinction for functions, so once we tell you the syntax for a
      <em>function-literal</em> you will be able to define functions in the same
      way. To define a function, you must give names to each of its arguments and
      provide a block of code you want to be executed.</p>
    </div>
    <div class="col-md-6">
      <pre><code data-language="icarus">// A simple function which computes squares
square : int -&gt; int
square = (n : int) -&gt; int {
  return n * n
}</code></pre>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <p>Of course, it seems silly to ever declare the type of a function, as
      the type is written directly in the function-literal! This is mostly true.
      For function literals, type-inference is essentially trivial, and so we
      can simplify the squaring function to be expressed as shown to the
      right.</p>
    </div>
    <div class="col-md-6">
      <pre><code data-language="icarus">// A simple function which computes squares
square := (n : int) -&gt; int {
  return n * n
}</code></pre>
    </div>
  </div>

  <h2>Conditionals</h2>
  <p class="lead">The basics</p>
  <div class="row">
    <div class="col-md-6">
      <p>Conditionals work mostly the same way as in most other curly-brace
      languages. We have introduced two small changes:
      <ol>
        <li>Enclosing conditions in parentheses <strong>is not</strong> necessary.</li>
        <li>Enclosing blocks in curly braces <strong>is</strong> necessary.</li>
      </ol>
      <p>The logic behind these choices is quite simple. It is easy to forget to
      have add curly braces when expanding a conditional from one line to two,
      so we require it. Once braces are required, there is no ambiguity about
      what is part of the condition and what is part of the conditional block,
      so we do not need parentheses surrounding the condition.
      </p>
    </div>

    <div class="col-md-6">
      <pre><code data-language="icarus">if message == "hello" {
  respond("howdy")
}
else if message == "goodbye" {
  respond("see you later")
}
else {
  respond("What we have here is a failure to communicate!")
}</code></pre>
    </div>
  </div>
  <p class="lead">Case-statements</p>
  <div class="row">
    <div class="col-md-6">
      <h4>What are they?</h4>
      <p>A case statement somewhat resembles a switch statement in C/C++, but
      it's functionality is quite different. In fact, it functions more like a
      if/else-if chain or a ternary operator. A case statement contains a
      sequence of key-value pairs. The keys are evaluated in order until one of
      them evaluates to <code>true</code> at which point the corresponding value
      is evaluated and returned. There is no "fallthrough" like in C++.
      Moreover, because case-statements evaluate to a specific value, each
      <strong>must</strong> return a value. Thus, every case-statement has an
      <code>else</code>-case as its final option.</p>

      <h4>Why do we have them?</h4>
      <p>Long if/else-if chains are often verbose and provide a more general
      framework than is really necessary. In the common situation where one
      wants to choose a value based on some input, the case-statement provides a
      terse, yet easily readable format.</p>

      <p>If you want to call several functions or modify several variables
      depending on some input data, an if/else-if chain may be a more
      appropriate choice.</p>
    </div>
    <div class="col-md-6">
      <pre><code data-language="icarus">// Determine the state of matter given the temperature
water_state : (temperature : int) -&gt; string = {
  return case {
    temp &lt;= 32  =&gt;  "ice"
    temp &lt; 212  =&gt;  "water"
    else        =&gt;  "vapor"
  }
}</code></pre>
    </div>
  </div>

  <h2>Pointers</h2>
  <p class="lead">Syntax</p>
  <div style="float: right; margin-left: 1em;">
    <pre><code data-language="icarus">n : int = 0   // int
n_ptr : &amp;int  // pointer to an int
n_ptr = &amp;n
n = 17

@n_ptr == 17  // true because n_ptr points to n</code></pre>
  </div>

  <p>Pointers in Icarus work similarly to how they do in C++, but the syntax
  is different. Rather than using <code>&amp;</code> and <code>*</code>,
  Icarus uses <code>&amp;</code> and <code>@</code>. Moreover, these are not
  simple drop-in replacements. To understand why, you must first notice that
  C++ has a built-in inconsistency in it's pointer syntax. Icarus is
  attempting to correct this.</p>

  <p>Notice that in C++, an ampersand is used to produce a pointer and an
  asterisk is used to dereference a pointer. However, when it comes time to
  declare a pointer in C++, you use the asterisk rather than an ampersand.
  An ampersand should seem more natural here, as it is the thing that makes
  pointers.</p>

  <p>To be fair, C++ has a complicated set of rules for declaring types an
  according to its philosophy of "declaration models usage," these rules
  really do make sense. That being said, we believe this philosophy is
  somewhat backwards and so we take a different approach.</p>

  <p>Instead, we use an ampersand to make pointers both on variables and on
  types. For dereferencing, we use the '@' symbol beacuse it reads cleanly
  and correctly. If <code>x</code> is a pointer (an address in memory), then
  <code>@x</code> denotes the value that is "at x."


  <h2>Repetition</h2>
  <div class="row">
    <div class="col-md-6">
      <p class="lead">Loop</p>
      <p>The simplest loop can be expressed with the <code>loop</code> keyword,
      followed by an iterating variable, and a range to loop over.</p>

      <p>Loops can have multiple ranges, delimited by a comma. Ranges in one
      loop can depend on previously defined iterators.</p>

      <p>One can also loop over arrays. As a general rule, loops should be used
      for simple "do X on all of Y"-type constructs. For more complicated
      conditions, Icarus uses a while loop.</p>

      <div style="min-height: 10em;"></div>
      <p class="lead">While</p>
      <p>While loops are work the same way as in any other language. As was seen
      with <code>loop</code> af <code>if</code> statements, there is no need to
      put parentheses around the condition, and the curly braces are
      mandatory.</p>
    </div>

    <div class="col-md-6">
      <pre><code data-language="icarus">// Sum of the first ten squares
n : int
loop i in 1 .. 10 {
  n += i * i
}

// Bubble-sort
loop i in 0 .. array.size() - 2,
     j in i + 1 .. array.size() - 1 {
  if array[i] &gt; array[j] {
    temp := array[i]
    array[i] = array[j]
    array[j] = temp
  }
}

array : [5; real]
array = [1.41421, 1.61803, 1.73205, 2.71828, 3.14159]
loop num in array {
  // do something with the number
}

// count prime divisors of n
divisor := 1
prime_divisor_count := 0
while n &gt; 1 {
  if n % divisor == 0 {
    n /= divisor
    prime_divisor_count += 1

  } else {
    divisor += 1
  }
}
</code></pre>
    </div>
  </div>
</div>
</body>
</html>
