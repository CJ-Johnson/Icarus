main ::= () -> () {
  foo () ping {
    print "sending..."
  } pong {
    print "received!\n"
  }
}

foo ::= scope {
  init ::= () => ping
  ping ::= block {
    before ::= (state: *int) -> {}
    after ::= (state: *int) => pong
  }
  pong ::= block {
    before ::= (state: *int) -> {}
    after ::= (state: *int) => ping
  }
}


