unique_ptr := struct {
  ptr := alloc(int)
}

__destroy__ := (uptr: &unique_ptr) -> void {
  print "Calling global destructor\n"
  free uptr.ptr
}

__print__ := (uptr: unique_ptr) -> void {
  print @uptr.ptr
}

main := void -> void {
  p: unique_ptr

  __destroy__ := (uptr: &unique_ptr) -> void {
    return
  }

  foo()

}
foo := void -> void {
  p: unique_ptr
  q: unique_ptr
}
